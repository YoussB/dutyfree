<!DOCTYPE html>
<html lang="en">
<head>
    
    <title>Duty Free - FTP</title>

    <link rel="stylesheet" type="text/css" href="/dutyfree/static/style.css">
</head>
<body>
<div class="container">
    <div class="logo-area">
        <div class="title">
            <h1>CONCOURSE DUTY FREE</h1>
        </div>
    </div>


    <div class="search">
    </div>

    <nav class="sidebar">
    </nav>

    <main class="content">
        

    <h2>FTP</h2>

    <a href="https://github.com/aequitas" target="_blank">aequitas</a>

    <p class="repository">https://github.com/aequitas/concourse-ftp-resource</p>

    <p class="desc">Concourse resource to interact with FTP servers.</p>

    <div id="github-readme">
        <div id="readme" class="instapaper_body md" data-path="README.md"><article class="markdown-body entry-content p-5" itemprop="text"><p><a href="https://hub.docker.com/r/aequitas/ftp-resource/" rel="nofollow"><img src="https://camo.githubusercontent.com/f33360a6d1646e0e1e7d9d7f11899efc55c33db9/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f70756c6c73672f61657175697461732f6674702d7265736f757263652e737667" alt="Docker Automated build" data-canonical-src="https://img.shields.io/docker/pullsg/aequitas/ftp-resource.svg" style="max-width:100%;"></a>
<a href="https://hub.docker.com/r/aequitas/ftp-resource/" rel="nofollow"><img src="https://camo.githubusercontent.com/7408ab0a525581e5fdf02e3452644b866ea7902e/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f6175746f6d617465642f61657175697461732f6674702d7265736f757263652e737667" alt="Docker Automated build" data-canonical-src="https://img.shields.io/docker/automated/aequitas/ftp-resource.svg" style="max-width:100%;"></a>
<a href="https://hub.docker.com/r/aequitas/ftp-resource/g" rel="nofollow"><img src="https://camo.githubusercontent.com/8e654239767315f01b4b7d0cb9fe06940c88a878/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f6275696c642f61657175697461732f6674702d7265736f757263652e737667" alt="Docker Automated build" data-canonical-src="https://img.shields.io/docker/build/aequitas/ftp-resource.svg" style="max-width:100%;"></a>
<a href="https://eurocyber.nl" rel="nofollow"><img src="https://camo.githubusercontent.com/54e790452ea726bbc36ef075d411871eaf5c8bf2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f43796265727665696c6967686569642d39372532352d79656c6c6f772e737667" alt="Cyberveiligheid" data-canonical-src="https://img.shields.io/badge/Cyberveiligheid-97%25-yellow.svg" style="max-width:100%;"></a></p>
<h1><a id="user-content-ftp-resource" class="anchor" aria-hidden="true" href="#ftp-resource"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FTP Resource</h1>
<p>Concourse resource to interact with FTP servers.</p>
<p><a href="https://hub.docker.com/r/aequitas/ftp-resource/" rel="nofollow">https://hub.docker.com/r/aequitas/ftp-resource/</a></p>
<h2><a id="user-content-recent-changes" class="anchor" aria-hidden="true" href="#recent-changes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recent changes</h2>
<ul>
<li>06-2018: Handle missing previous versions (<a href="https://github.com/aequitas/concourse-ftp-resource/issues/8">https://github.com/aequitas/concourse-ftp-resource/issues/8</a>)</li>
<li>01-2018: added support for semver versions.</li>
</ul>
<h2><a id="user-content-deploying-to-concourse" class="anchor" aria-hidden="true" href="#deploying-to-concourse"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploying to Concourse</h2>
<p>No changes are necessary to BOSH configuration. However, you must define the FTP resource in a <code>resource_types</code> as can be seen in the below example pipeline.</p>
<h2><a id="user-content-source-configuration" class="anchor" aria-hidden="true" href="#source-configuration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Source Configuration</h2>
<ul>
<li>
<p><code>uri</code>: <em>Required.</em> The URI for the FTP server (including path).
Example: <code>ftp://user:password@example.com/team/prod/</code></p>
</li>
<li>
<p><code>regex</code>: <em>Required.</em> Python regex to match filenames to. Supports capture groups. Requires at least one capture group named <code>version</code>. Other groups are added as <code>metadata</code>.</p>
</li>
<li>
<p><code>version_key</code>: <em>Optional</em> Alternative key to be used for the <code>version</code> capture group (default <code>version</code>).</p>
</li>
<li>
<p><code>debug</code>: <em>Optional</em> Set debug logging of scripts, takes boolean (default <code>true</code>).</p>
</li>
</ul>
<h2><a id="user-content-behavior" class="anchor" aria-hidden="true" href="#behavior"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Behavior</h2>
<h3><a id="user-content-check-return-list-of-file-versions" class="anchor" aria-hidden="true" href="#check-return-list-of-file-versions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>check</code>: Return list of file versions.</h3>
<p>Will request a list of files from the <code>uri</code> and filter on matching <code>regex</code> extracting the <code>version_key</code> and returning list of versions captured groups.</p>
<h3><a id="user-content-in-retrieve-file-matching-version-from-ftp" class="anchor" aria-hidden="true" href="#in-retrieve-file-matching-version-from-ftp"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>in</code>: Retrieve file matching <code>version</code> from ftp.</h3>
<p>Uses the <code>regex</code> to compose a list of files and versions, will return the one file that matches the <code>version</code> provided in <code>params</code>.</p>
<h4><a id="user-content-parameters" class="anchor" aria-hidden="true" href="#parameters"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<ul>
<li><code>version</code>: <em>Required</em> The version to return (will be matched against the <code>version</code> regex capture group).</li>
</ul>
<h3><a id="user-content-out-upload-files-matching-file-glob-to-ftp" class="anchor" aria-hidden="true" href="#out-upload-files-matching-file-glob-to-ftp"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>out</code>: Upload file(s) matching <code>file</code> glob to ftp.</h3>
<p>Uploads a file(s) glob matching <code>file</code> to the ftp directory specified by <code>uri</code>.</p>
<ul>
<li>
<p><code>file</code>: Glob used to determine files to upload from src dir (default <code>*</code>).</p>
</li>
<li>
<p><code>keep_versions</code>: If specified determined the amount of files to keep, deleting the old versions (default null). Requires a regex capture group named <code>file</code> to work.</p>
</li>
</ul>
<h4><a id="user-content-parameters-1" class="anchor" aria-hidden="true" href="#parameters-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<ul>
<li><code>file</code>: <em>Required.</em> Glob pattern to specify which files need to be uploaded.</li>
</ul>
<h2><a id="user-content-example-pipeline" class="anchor" aria-hidden="true" href="#example-pipeline"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example pipeline</h2>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">resource_types</span>:
  - <span class="pl-ent">name</span>: <span class="pl-s">ftp</span>
    <span class="pl-ent">type</span>: <span class="pl-s">docker-image</span>
    <span class="pl-ent">source</span>:
      <span class="pl-ent">repository</span>: <span class="pl-s">aequitas/ftp-resource</span>

<span class="pl-ent">resources</span>:
  - <span class="pl-ent">name</span>: <span class="pl-s">ftpupload</span>
    <span class="pl-ent">type</span>: <span class="pl-s">ftp</span>
    <span class="pl-ent">source</span>:
      <span class="pl-ent">regex</span>: <span class="pl-s">(?P&lt;file&gt;test(?P&lt;version&gt;[0-9\.]+).*\.txt)</span>
      <span class="pl-ent">uri</span>: <span class="pl-s">ftp://user:password@example.com:21/team/prod/</span>

<span class="pl-ent">jobs</span>:
  - <span class="pl-ent">name</span>: <span class="pl-s">testftp</span>
    <span class="pl-ent">plan</span>:
      - <span class="pl-ent">task</span>: <span class="pl-s">touchfile</span>
        <span class="pl-ent">config</span>:
          <span class="pl-ent">platform</span>: <span class="pl-s">linux</span>
          <span class="pl-ent">run</span>:
            <span class="pl-ent">path</span>: <span class="pl-s">sh</span>
            <span class="pl-ent">args</span>:
            - <span class="pl-s">-exc</span>
            - <span class="pl-s">|</span>
<span class="pl-s">              touch test/test1.txt</span>
<span class="pl-s"></span>          <span class="pl-ent">outputs</span>:
          - <span class="pl-ent">name</span>: <span class="pl-s">test</span>
      - <span class="pl-ent">put</span>: <span class="pl-s">ftpupload</span>
        <span class="pl-ent">params</span>:
          <span class="pl-ent">file</span>: <span class="pl-s">test/test1.txt</span>
</pre></div>
</article></div>
    </div>


    </main>
</div>
</body>
</html>





