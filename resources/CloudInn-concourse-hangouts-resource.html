<!DOCTYPE html>
<html lang="en">
<head>
    
    <title>Duty Free - Google Hangouts Notification Resource</title>

    <link rel="stylesheet" type="text/css" href="/dutyfree/static/style.css">
</head>
<body>
<div class="container">
    <div class="logo-area">
        <div class="title">
            <h1>CONCOURSE DUTY FREE</h1>
        </div>
    </div>


    <div class="search">
         
    </div>

    <nav class="sidebar">
         
    </nav>

    <main class="content">

        <div class="breadcrumb">
        
        
            
                    <span class="breadcrumb-link"><a href="/dutyfree">All Resources</a></span>
                
        
            
                    <span>Google Hangouts Notification Resource</span>
            
        
        </div>

        
    <section class="top-area">
        <h2>Google Hangouts Notification Resource</h2>
        <div>
            <a target="_blank" href="https://github.com/CloudInn/concourse-hangouts-resource">
                <img src="/dutyfree/static/GitHub-Mark-120px-plus.png" alt="Resource Source on Github"
                     class="github-icon-detail"
                     title="Resource Source on Github">
            </a>
            <a href="https://github.com/CloudInn" target="_blank" class="author">CloudInn</a>
        </div>
    </section>
    <section class="middle-area">
        <div class="description">
            <h3>Description</h3>
            <p class="desc"></p>
        </div>
    </section>
    <section id="github-readme">
        <h3>Read Me</h3>
        <div id="readme" class="instapaper_body md" data-path="README.md"><article class="markdown-body entry-content p-5" itemprop="text"><h1><a id="user-content-concourse-google-hangouts-resource" class="anchor" aria-hidden="true" href="#concourse-google-hangouts-resource"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Concourse Google Hangouts Resource</h1>
<p>A <a href="http://concourse.ci/" rel="nofollow">Concourse</a> resource to post to notification to Google Hagouts room using webhooks, the notification includes the pipeline name, The job name and build number which the resource is running under, and an optional message.</p>
<p>Listed in Concourse <a href="https://concourse-ci.org/community-resources.html" rel="nofollow">community resources</a></p>
<h2><a id="user-content-resource-type-configuration" class="anchor" aria-hidden="true" href="#resource-type-configuration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resource Type Configuration</h2>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">resource_types</span>:
  - <span class="pl-ent">name</span>: <span class="pl-s">hangouts-resource</span>
    <span class="pl-ent">type</span>: <span class="pl-s">docker-image</span>
    <span class="pl-ent">source</span>:
      <span class="pl-ent">repository</span>: <span class="pl-s">cloudinn/concourse-hangouts-resource</span>
      <span class="pl-ent">tag</span>: <span class="pl-s">latest</span></pre></div>
<h2><a id="user-content-source-configuration" class="anchor" aria-hidden="true" href="#source-configuration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Source Configuration</h2>
<ul>
<li><code>webhook_url</code>: <em>Required - (String)</em>. The webhook generated for Hagouts channel. (i.e. "<a href="https://chat.googleapis.com/v1/spaces/ABC/messages?key=DEF" rel="nofollow">https://chat.googleapis.com/v1/spaces/ABC/messages?key=DEF</a>)</li>
<li><code>post_url</code>: <em>Optional - (Boolean)</em>. Include link to the current job, this is pipeline wide setting in all jobs using resource, can be overridden in <code>params</code> in each step. (<em>Default:</em> <code>true</code>)</li>
</ul>
<h3><a id="user-content-example" class="anchor" aria-hidden="true" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">resources</span>:
- <span class="pl-ent">name</span>: <span class="pl-s">hangouts</span>
  <span class="pl-ent">type</span>: <span class="pl-s">hangouts-resource</span>
  <span class="pl-ent">source</span>:
    <span class="pl-ent">webhook_url</span>: <span class="pl-s">{{pipeline_alerts_webhook}}</span>
    <span class="pl-ent">post_url</span>: <span class="pl-c1">true</span></pre></div>
<h2><a id="user-content-behaviour" class="anchor" aria-hidden="true" href="#behaviour"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Behaviour</h2>
<h3><a id="user-content-check-non-functional" class="anchor" aria-hidden="true" href="#check-non-functional"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>check</code>: Non-functional</h3>
<h3><a id="user-content-in-non-functional" class="anchor" aria-hidden="true" href="#in-non-functional"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>in</code>: Non-functional</h3>
<h3><a id="user-content-out-post-message-to-hangouts-chat-room" class="anchor" aria-hidden="true" href="#out-post-message-to-hangouts-chat-room"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>out</code>: Post message to Hangouts chat room</h3>
<p>Posts the given message to Google Hangouts channel that is corresponding to the webhook. It additionally includes information from the current running build as <code>$BUILD_PIPELINE_NAME</code> which is the <strong>pipeline name</strong>, <code>$BUILD_NAME</code> which reflects the <strong>build id</strong> shown in Concourse Web UI, and <code>$BUILD_JOB_NAME</code> which is the <strong>job name</strong> as defined in the pipeline, both build id and job name belongs to the current build for the job the resource is used under.</p>
<h4><a id="user-content-parameters" class="anchor" aria-hidden="true" href="#parameters"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<ul>
<li><code>message</code>: <em>Optional - (String)</em>. The message to post along the other information to Hangouts room.</li>
<li><code>message_file</code> <em>Optional - (String)</em>. Path to file containing text to append to <code>message</code>)</li>
<li><code>post_url</code> <em>Optional - (Boolean)</em>. Include link to the current job, if set this will override <code>post_url</code> in <code>source</code> for the current step. (<em>Default:</em> Fall back to <code>post_url</code> in <code>source</code>)</li>
</ul>
<h3><a id="user-content-example-1" class="anchor" aria-hidden="true" href="#example-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>You're suggested to use it under <code>try:</code> step, you don't want your build to fail if the resource failed</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">jobs</span>:
  - <span class="pl-ent">name</span>: <span class="pl-s">some-job</span>
    <span class="pl-ent">plan</span>:
      - <span class="pl-ent">try</span>:
          <span class="pl-ent">put</span>: <span class="pl-s">hangouts</span>
          <span class="pl-ent">params</span>:
            <span class="pl-ent">message</span>: <span class="pl-s"><span class="pl-pds">"</span>Successfully released version: <span class="pl-pds">"</span></span>
            <span class="pl-ent">message_file</span>: <span class="pl-s">project/version.txt</span></pre></div>
<h2><a id="user-content-suggested-use-case" class="anchor" aria-hidden="true" href="#suggested-use-case"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Suggested Use Case:</h2>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">jobs</span>:
  - <span class="pl-ent">name</span>: <span class="pl-s">some-job</span>
    <span class="pl-ent">plan</span>:
      - <span class="pl-ent">try</span>:
          <span class="pl-ent">put</span>: <span class="pl-s">hangouts</span>
          <span class="pl-ent">params</span>:
            <span class="pl-ent">message</span>: <span class="pl-s">Job Started !</span>
            <span class="pl-ent">post_url</span>: <span class="pl-c1">true</span>

      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> Some steps to execute</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>

    <span class="pl-ent">on_failure</span>:
      <span class="pl-ent">try</span>:
        <span class="pl-ent">put</span>: <span class="pl-s">hangouts</span>
        <span class="pl-ent">params</span>:
          <span class="pl-ent">message</span>: <span class="pl-s">Job Failed !</span>

    <span class="pl-ent">on_success</span>:
      <span class="pl-ent">try</span>:
        <span class="pl-ent">put</span>: <span class="pl-s">hangouts</span>
        <span class="pl-ent">params</span>:
          <span class="pl-ent">message</span>: <span class="pl-s">Job Succeeded !</span>
          <span class="pl-ent">post_url</span>: <span class="pl-c1">false</span></pre></div>
<h2><a id="user-content-full-example" class="anchor" aria-hidden="true" href="#full-example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Full example:</h2>
<p>This is a working example of a pipeline file that does absolutely nothing other then posting to Hangouts.</p>
<p>You can test it as is after passing <code>hangouts_webhook</code> while setting up the pipeline or replacing <code>((hangouts_webhook))</code> in place with the webhook URL.</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">resource_types</span>:
  - <span class="pl-ent">name</span>: <span class="pl-s">hangouts-resource</span>
    <span class="pl-ent">type</span>: <span class="pl-s">docker-image</span>
    <span class="pl-ent">source</span>:
      <span class="pl-ent">repository</span>: <span class="pl-s">cloudinn/concourse-hangouts-resource</span>
      <span class="pl-ent">tag</span>: <span class="pl-s">latest</span>
      <span class="pl-ent">post_url</span>: <span class="pl-c1">true</span>

<span class="pl-ent">resources</span>:
- <span class="pl-ent">name</span>: <span class="pl-s">hangouts</span>
  <span class="pl-ent">type</span>: <span class="pl-s">hangouts-resource</span>
  <span class="pl-ent">source</span>:
    <span class="pl-ent">webhook_url</span>: <span class="pl-s">((hangouts_webhook))</span>
    <span class="pl-ent">post_url</span>: <span class="pl-c1">true</span>

  <span class="pl-c"><span class="pl-c">#</span> .</span>
  <span class="pl-c"><span class="pl-c">#</span> .</span>
  <span class="pl-c"><span class="pl-c">#</span> .</span>
  <span class="pl-c"><span class="pl-c">#</span> Some other resources</span>
  <span class="pl-c"><span class="pl-c">#</span> .</span>
  <span class="pl-c"><span class="pl-c">#</span> .</span>
  <span class="pl-c"><span class="pl-c">#</span> .</span>


<span class="pl-ent">jobs</span>:
  - <span class="pl-ent">name</span>: <span class="pl-s">some-job</span>
    <span class="pl-ent">serial</span>: <span class="pl-c1">true</span>
    <span class="pl-ent">plan</span>:
      - <span class="pl-ent">try</span>:
          <span class="pl-ent">put</span>: <span class="pl-s">hangouts</span>
          <span class="pl-ent">params</span>:
            <span class="pl-ent">message</span>: <span class="pl-s">Build Started !</span>

      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> Some steps to execute</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>
      <span class="pl-c"><span class="pl-c">#</span> .</span>

    <span class="pl-ent">on_failure</span>:
      <span class="pl-ent">try</span>:
        <span class="pl-ent">put</span>: <span class="pl-s">hangouts</span>
        <span class="pl-ent">params</span>:
          <span class="pl-ent">message</span>: <span class="pl-s">Build Failed !</span>

    <span class="pl-ent">on_success</span>:
      <span class="pl-ent">try</span>:
        <span class="pl-ent">put</span>: <span class="pl-s">hangouts</span>
        <span class="pl-ent">params</span>:
          <span class="pl-ent">message</span>: <span class="pl-s">Build Successed !</span></pre></div>
<h2><a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>License</h2>
<p>BSD 2-Clause</p>
</article></div>
    </section>


    </main>
</div>
    
</body>
</html>





